{
  "name": "popover",
  "type": "registry:ui",
  "registryDependencies": [],
  "dependencies": [
    "motion"
  ],
  "devDependencies": [],
  "tailwind": {},
  "cssVars": {
    "light": {},
    "dark": {}
  },
  "files": [
    {
      "path": "popover.tsx",
      "content": "'use client';\nimport useClickOutside from '@/hooks/useClickOutside';\nimport { AnimatePresence, MotionConfig, motion } from 'motion/react';\nimport { ArrowLeftIcon } from 'lucide-react';\nimport { useRef, useState, useEffect, useId } from 'react';\n\nconst TRANSITION = {\n  type: 'spring',\n  bounce: 0.05,\n  duration: 0.3,\n};\n\nexport default function Popover() {\n  const uniqueId = useId();\n  const formContainerRef = useRef<HTMLDivElement>(null);\n  const [isOpen, setIsOpen] = useState(false);\n  const [note, setNote] = useState<null | string>(null);\n\n  const openMenu = () => {\n    setIsOpen(true);\n  };\n\n  const closeMenu = () => {\n    setIsOpen(false);\n    setNote(null);\n  };\n\n  useClickOutside(formContainerRef, () => {\n    closeMenu();\n  });\n\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        closeMenu();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, []);\n\n  return (\n    <MotionConfig transition={TRANSITION}>\n      <div className='relative flex items-center justify-center'>\n        <motion.button\n          key='button'\n          layoutId={`popover-${uniqueId}`}\n          className='flex h-9 items-center border border-zinc-950/10 bg-white px-3 text-zinc-950 dark:border-zinc-50/10 dark:bg-zinc-700 dark:text-zinc-50'\n          style={{\n            borderRadius: 8,\n          }}\n          onClick={openMenu}\n        >\n          <motion.span\n            layoutId={`popover-label-${uniqueId}`}\n            className='text-sm'\n          >\n            Add Note\n          </motion.span>\n        </motion.button>\n\n        <AnimatePresence>\n          {isOpen && (\n            <motion.div\n              ref={formContainerRef}\n              layoutId={`popover-${uniqueId}`}\n              className='absolute h-[200px] w-[364px] overflow-hidden border border-zinc-950/10 bg-white outline-none dark:bg-zinc-700'\n              style={{\n                borderRadius: 12,\n              }}\n            >\n              <form\n                className='flex h-full flex-col'\n                onSubmit={(e) => {\n                  e.preventDefault();\n                }}\n              >\n                <motion.span\n                  layoutId={`popover-label-${uniqueId}`}\n                  aria-hidden='true'\n                  style={{\n                    opacity: note ? 0 : 1,\n                  }}\n                  className='absolute left-4 top-3 select-none text-sm text-zinc-500 dark:text-zinc-400'\n                >\n                  Add Note\n                </motion.span>\n                <textarea\n                  className='h-full w-full resize-none rounded-md bg-transparent px-4 py-3 text-sm outline-none'\n                  autoFocus\n                  onChange={(e) => setNote(e.target.value)}\n                />\n                <div key='close' className='flex justify-between px-4 py-3'>\n                  <button\n                    type='button'\n                    className='flex items-center'\n                    onClick={closeMenu}\n                    aria-label='Close popover'\n                  >\n                    <ArrowLeftIcon\n                      size={16}\n                      className='text-zinc-900 dark:text-zinc-100'\n                    />\n                  </button>\n                  <button\n                    className='relative ml-1 flex h-8 shrink-0 scale-100 select-none appearance-none items-center justify-center rounded-lg border border-zinc-950/10 bg-transparent px-2 text-sm text-zinc-500 transition-colors hover:bg-zinc-100 hover:text-zinc-800 focus-visible:ring-2 active:scale-[0.98] dark:border-zinc-50/10 dark:text-zinc-50 dark:hover:bg-zinc-800'\n                    type='submit'\n                    aria-label='Submit note'\n                    onClick={() => {\n                      closeMenu();\n                    }}\n                  >\n                    Submit Note\n                  </button>\n                </div>\n              </form>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n    </MotionConfig>\n  );\n}\n",
      "type": "registry:ui"
    }
  ]
}